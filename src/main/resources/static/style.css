:root {
    /* Deep Space Theme */
    --bg-dark: #0B0E14;
    --bg-marketing: #0f131a;
    --bg-card: rgba(30, 30, 46, 0.4);
    /* Glass Effect Base */
    --bg-card-hover: rgba(40, 40, 60, 0.6);

    /* Typography */
    --text-primary: #FFFFFF;
    --text-secondary: #94A3B8;
    --text-tertiary: #64748B;

    /* Accents - Cyberpunk/Neon Palette */
    --accent-cyan: #06B6D4;
    --accent-cyan-glow: rgba(6, 182, 212, 0.5);

    --accent-purple: #8B5CF6;
    --accent-purple-glow: rgba(139, 92, 246, 0.5);

    --accent-green: #10B981;
    --accent-green-glow: rgba(16, 185, 129, 0.5);

    --accent-blue: #3B82F6;
    --accent-blue-gradient: linear-gradient(135deg, #3B82F6, #2563EB);

    --danger: #EF4444;

    /* Effects */
    --glass-border: 1px solid rgba(255, 255, 255, 0.08);
    --glass-blur: blur(12px);
    --shadow-soft: 0 4px 20px rgba(0, 0, 0, 0.25);
    --shadow-glow: 0 0 15px rgba(59, 130, 246, 0.3);

    --card-radius: 16px;
    --btn-radius: 8px;
    --transition-fast: 0.2s cubic-bezier(0.4, 0, 0.2, 1);
}

* {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
}

body {
    font-family: 'Inter', system-ui, -apple-system, sans-serif;
    background-color: var(--bg-dark);
    /* Subtle background mesh gradient for depth */
    background-image:
        radial-gradient(circle at 10% 20%, rgba(139, 92, 246, 0.05) 0%, transparent 20%),
        radial-gradient(circle at 90% 80%, rgba(6, 182, 212, 0.05) 0%, transparent 20%);
    color: var(--text-primary);
    display: flex;
    height: 100vh;
    overflow: hidden;
    line-height: 1.6;
    letter-spacing: -0.01em;
}

/* Sidebar */
.sidebar {
    width: 260px;
    background: rgba(11, 14, 20, 0.95);
    border-right: var(--glass-border);
    display: flex;
    flex-direction: column;
    padding: 24px;
    backdrop-filter: var(--glass-blur);
    /* Safari support */
    -webkit-backdrop-filter: var(--glass-blur);
    z-index: 100;
    transition: width 0.3s ease;
}

/* Sidebar Toggle */
.sidebar-toggle-btn {
    margin-left: auto;
    cursor: pointer;
    font-size: 1rem;
    color: var(--text-secondary);
    transition: color 0.2s;
}

.sidebar-toggle-btn:hover {
    color: var(--accent-cyan);
}

/* Collapsed State */
.sidebar.collapsed {
    width: 80px;
    padding: 24px 10px;
}

.sidebar.collapsed .logo {
    justify-content: center;
}

.sidebar.collapsed .logo-text,
.sidebar.collapsed .sidebar-toggle-btn {
    /* We might want to keep the toggle button visible? 
       Actually, if we hide the toggle button, user can't expand it back.
       Let's keep toggle button but maybe move it or change icon?
       
       Better UI: 
       When collapsed, show ONLY the logo icon and maybe the toggle button below or integrated?
       Or make the whole sidebar header clickable?
       
       Let's hide the TEXT. Keep the toggle button but it might look crowded.
       Let's hide the toggle button from the header line and maybe position it absolutely or rely on the logo click?
       No, let's keep it simple.
    */
    display: none;
}

/* Wait, if I hide the toggle button, how do they expand? */
/* I should Move the toggle button or styling. */
/* Let's simply hide the LOGO TEXT, but keep the toggle button. */

.sidebar.collapsed .logo-text {
    display: none;
}

.sidebar.collapsed .logo {
    flex-direction: column;
    gap: 15px;
}

.sidebar.collapsed .sidebar-toggle-btn {
    margin: 0;
    display: block;
    /* Ensure visible */
}

/* Hide Nav Text */
.sidebar.collapsed .nav-item-wrapper {
    font-size: 0;
    /* Hides text nodes */
    justify-content: center;
}

.sidebar.collapsed .nav-item-wrapper i {
    font-size: 1.2rem;
    margin: 0;
}

/* Hide Chevron */
.sidebar.collapsed .fa-chevron-down {
    display: none;
}

/* Hide Sub-menus */
.sidebar.collapsed .sub-nav-links,
.sidebar.collapsed .nested-nav {
    display: none !important;
}


.logo {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-bottom: 48px;
    font-size: 1.25rem;
    font-weight: 700;
    color: var(--text-primary);
    letter-spacing: -0.02em;
}

.logo i {
    color: var(--accent-cyan);
    filter: drop-shadow(0 0 5px var(--accent-cyan-glow));
}

.logo img {
    width: 32px;
    height: 32px;
}

.nav-links {
    list-style: none;
    flex: 1;
}

.nav-links li {
    padding: 12px 16px;
    margin-bottom: 8px;
    cursor: pointer;
    border-radius: var(--btn-radius);
    color: var(--text-secondary);
    transition: var(--transition-fast);
    font-weight: 500;
    align-items: center;
    gap: 12px;
}

.nav-links li.has-children {
    display: block;
    /* Allow vertical stacking of wrapper and sub-menu */
}


.nav-links li:hover {
    background: rgba(255, 255, 255, 0.05);
    color: var(--text-primary);
}

.nav-links li.active {
    background: linear-gradient(90deg, rgba(59, 130, 246, 0.15), transparent);
    color: var(--accent-blue);
    border-left: 3px solid var(--accent-blue);
}

/* Sub-nav Styling */
.sub-nav-links {
    list-style: none;
    padding-left: 20px;
    margin-bottom: 10px;
    margin-top: 5px;
}

.sub-nav-links li {
    padding: 8px 12px;
    font-size: 0.9rem;
    color: var(--text-tertiary);
    border-left: none;
    margin-bottom: 4px;
    cursor: pointer;
    border-radius: var(--btn-radius);
    transition: all 0.2s ease;
    /* display: flex; REMOVED to allow vertical stacking of nested lists */
    /* align-items: center;  REMOVED */
    /* gap: 10px; REMOVED */
    display: block;
    /* Stack wrapper and nested UL vertically */
}


.sub-nav-links li:hover {
    color: var(--text-primary);
    background: rgba(255, 255, 255, 0.05);
}

.sub-nav-links li.active {
    color: var(--accent-cyan);
    background: rgba(6, 182, 212, 0.1);
    border-left: 3px solid var(--accent-cyan);
}

/* Third-level nested navigation - Enhanced Hierarchy */
.nested-nav {
    list-style: none;
    padding-left: 25px;
    /* Increased from 15px */
    margin-top: 5px;
    border-left: 1px solid rgba(255, 255, 255, 0.15);
    /* Slightly brighter border */
    margin-left: 8px;
    /* Increased margin */
}

/* Specific styling for 3rd level items */
.nested-nav li {
    font-size: 0.85rem;
    /* Smaller font for hierarchy */
    padding: 6px 10px;
    /* Tighter padding */
    color: var(--text-secondary);
}

.nested-nav li i {
    font-size: 0.8rem;
    /* Smaller icons */
    opacity: 0.8;
}

.nav-item-wrapper {
    display: flex;
    align-items: center;
    gap: 10px;
    width: 100%;
}


/* Main Content */
.main-content {
    flex: 1;
    padding: 32px;
    overflow-y: auto;
    display: grid;
    grid-template-rows: auto 1fr;
    gap: 32px;
}

/* Header */
.header {
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.search-bar {
    background: rgba(255, 255, 255, 0.03);
    padding: 10px 16px;
    border-radius: 99px;
    /* Pill shape */
    display: flex;
    align-items: center;
    width: 320px;
    border: 1px solid rgba(255, 255, 255, 0.05);
    transition: var(--transition-fast);
}

.search-bar:focus-within {
    border-color: var(--text-secondary);
    background: rgba(255, 255, 255, 0.06);
}

.search-bar input {
    background: transparent;
    border: none;
    color: var(--text-primary);
    margin-left: 10px;
    outline: none;
    width: 100%;
    font-size: 0.9rem;
}

.user-profile {
    display: flex;
    align-items: center;
    gap: 16px;
    color: var(--text-secondary);
}

/* Dashboard Grid */
.dashboard-grid {
    display: grid;
    grid-template-columns: 1fr 400px;
    gap: 24px;
    height: 100%;
}

.left-panel {
    display: grid;
    grid-template-rows: auto auto 1fr;
    gap: 24px;
    align-content: start;
}

.right-panel {
    display: flex;
    flex-direction: column;
    gap: 24px;
}

/* Card System - Glassmorphism */
.card {
    background: var(--bg-card);
    backdrop-filter: var(--glass-blur);
    -webkit-backdrop-filter: var(--glass-blur);
    border: var(--glass-border);
    border-radius: var(--card-radius);
    padding: 24px;
    box-shadow: var(--shadow-soft);
    display: flex;
    flex-direction: column;
    position: relative;
    overflow: hidden;
    transition: transform var(--transition-fast);
}

/* Subtle glow on hover for specific cards if desired */
/* .card:hover {
    box-shadow: 0 8px 30px rgba(0,0,0,0.4);
    border-color: rgba(255,255,255,0.12);
} */

.card-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 24px;
    color: var(--text-primary);
    font-size: 0.95rem;
    font-weight: 600;
    letter-spacing: 0.02em;
    text-transform: uppercase;
}

.card-header i {
    color: var(--text-secondary);
    opacity: 0.7;
}

/* Inputs & Buttons - Premium Feel */
.input-group {
    background: rgba(0, 0, 0, 0.3);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: var(--btn-radius);
    padding: 12px 16px;
    margin-bottom: 16px;
    transition: var(--transition-fast);
}

.input-group:focus-within {
    border-color: var(--accent-blue);
    box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.2);
}

.input-group input {
    background: transparent;
    border: none;
    color: var(--text-primary);
    width: 100%;
    outline: none;
    font-size: 1rem;
    font-family: inherit;
}

.btn-primary {
    background: var(--accent-blue-gradient);
    color: white;
    border: none;
    padding: 14px 24px;
    border-radius: var(--btn-radius);
    cursor: pointer;
    font-weight: 600;
    font-size: 0.95rem;
    letter-spacing: 0.02em;
    box-shadow: var(--shadow-glow);
    transition: all 0.2s ease;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
}

.btn-primary:hover:not(:disabled) {
    transform: translateY(-2px);
    box-shadow: 0 4px 25px rgba(59, 130, 246, 0.5);
    filter: brightness(1.1);
}

.btn-primary:active:not(:disabled) {
    transform: translateY(0);
}

.btn-primary:disabled {
    background: rgba(255, 255, 255, 0.05);
    /* Ghosted */
    color: var(--text-secondary);
    cursor: not-allowed;
    box-shadow: none;
}

/* Prompt Editor Specifics */
.prompt-editor-input {
    background: rgba(0, 0, 0, 0.3);
    color: var(--text-secondary);
    /* Text color for textarea */
    border: 1px solid rgba(255, 255, 255, 0.08);
    padding: 12px;
    border-radius: var(--btn-radius);
    font-family: 'JetBrains Mono', 'Fira Code', monospace;
    /* Coding font */
    font-size: 0.9rem;
    width: 100%;
    outline: none;
    transition: var(--transition-fast);
    line-height: 1.5;
}

.prompt-editor-input:focus {
    border-color: var(--accent-purple);
    /* Purple for creative tasks */
    color: var(--text-primary);
}

/* select element specific overrides */
select.prompt-editor-input {
    font-family: 'Inter', sans-serif;
    cursor: pointer;
}

/* Status Indicators */
.status-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 12px 16px;
    background: rgba(255, 255, 255, 0.02);
    border-radius: var(--btn-radius);
    border: 1px solid rgba(255, 255, 255, 0.03);
    margin-bottom: 8px;
}

.test-gen-icon {
    width: 32px;
    height: 32px;
    object-fit: contain;
    margin-right: 12px;
}

.status-indicator {
    width: 8px;
    height: 8px;
    border-radius: 50%;
    margin-left: 10px;
    box-shadow: 0 0 8px currentColor;
    /* Glow based on color */
    background-color: currentColor;
    color: var(--text-tertiary);
    /* Default state color */
}

.status-indicator.active {
    color: var(--accent-green);
}

.status-indicator.running {
    color: #FFD700;
}

.status-indicator.error {
    color: var(--danger);
}

/* Execution Lab (Terminal) */
.execution-lab {
    background: #09090b;
    /* Pitch black */
    color: #4ade80;
    /* Terminal Green */
    font-family: 'JetBrains Mono', monospace;
    padding: 20px;
    border-radius: var(--btn-radius);
    height: 240px;
    overflow-y: auto;
    font-size: 0.85rem;
    border: 1px solid #27272a;
    box-shadow: inset 0 2px 10px rgba(0, 0, 0, 0.5);
}

.log-entry {
    margin-bottom: 6px;
}

.log-error {
    color: #f87171;
}

.log-success {
    color: #34d399;
}

/* Discovery Graph / Brain */
.discovery-graph {
    min-height: 350px;
    /* Increased height */
    height: 100%;
    display: flex;
    justify-content: center;
    align-items: center;
    overflow: hidden;
    /* Ensure image doesn't overflow rounded corners */
    margin: -24px;
    /* Negate card padding to fill completely if desired, or keep padding */
    margin-top: 0;
    /* Keep header spacing */
}

.graph-placeholder {
    width: 100%;
    height: 100%;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    position: relative;
}

.brain-images-container {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 20px;
    width: 100%;
    flex: 1;
    /* Allow it to share space with text */
    min-height: 0;
    /* Important for flex child scrolling/sizing */
    padding: 10px;
}

.brain-img {
    width: 48%;
    max-width: 280px;
    height: auto;
    max-height: 90%;
    object-fit: contain;
    border-radius: 12px;
    /* Fill the area */
    object-position: center top;
    /* Focus on top/center of robot */
    filter: drop-shadow(0 0 20px rgba(6, 182, 212, 0.2));
    transition: filter 0.3s, transform 0.5s;
}

/* Holographic Brain Styles */
.hologram-container {
    position: relative;
    width: 100%;
    height: 100%;
    display: flex;
    justify-content: center;
    align-items: center;
}

.hologram {
    display: block;
    /* Ensure visibility */
    width: 80%;
    /* Adjust size as needed */
    max-width: 400px;
    height: auto;
    object-fit: contain;
    filter: drop-shadow(0 0 15px var(--accent-cyan));
    animation: hologramPulse 4s infinite ease-in-out, float 6s infinite ease-in-out;
    opacity: 0.9;
}

/* Hologram Scanning Effect (Optional Ring or Overlay) */
.hologram-effect {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 90%;
    height: 90%;
    border-radius: 50%;
    border: 1px solid rgba(6, 182, 212, 0.1);
    box-shadow: 0 0 30px rgba(6, 182, 212, 0.1);
    animation: spinReverse 20s linear infinite;
    z-index: -1;
    /* Behind the brain */
}

@keyframes hologramPulse {

    0%,
    100% {
        filter: drop-shadow(0 0 15px var(--accent-cyan)) brightness(1);
        opacity: 0.9;
    }

    50% {
        filter: drop-shadow(0 0 30px var(--accent-cyan)) brightness(1.2);
        opacity: 1;
    }
}

@keyframes float {

    0%,
    100% {
        transform: translateY(0);
    }

    50% {
        transform: translateY(-10px);
    }
}

@keyframes spinReverse {
    from {
        transform: translate(-50%, -50%) rotate(360deg);
    }

    to {
        transform: translate(-50%, -50%) rotate(0deg);
    }
}

/* Thinking Pulse Animation - Subtle Zoom/Glow */
.thinking-mode .brain-img {
    animation: brainWebPulse 4s infinite ease-in-out;
}

@keyframes brainWebPulse {

    0%,
    100% {
        filter: brightness(1);
        transform: scale(1);
    }

    50% {
        filter: brightness(1.1);
        transform: scale(1.02);
    }
}

.brain-status-text {
    /* position: absolute; REMOVED to prevent overlay */
    /* bottom: 20px; REMOVED */
    margin-top: 1px;
    /* Reduced spacing */
    background: transparent;
    /* Removed blue background */
    backdrop-filter: none;
    /* Removed blur since no background */
    padding: 10px 24px;
    border-radius: 0;
    border: none;
    /* Removed border */
    text-align: center;
    box-shadow: none;
    /* Removed shadow */
    z-index: 10;
}

.brain-status-text h3 {
    font-size: 1rem;
    color: #fff;
    font-weight: 700;
}

.brain-status-text p {
    font-size: 0.85rem;
    color: #fff;
    font-weight: 500;
}

/* Reports & Quality */
.quality-box {
    padding: 24px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.03), transparent);
    border-radius: var(--card-radius);
    text-align: center;
}

/* Acceptance Criteria Content */
.ac-section {
    margin-top: 20px;
    padding-top: 20px;
    border-top: 1px solid rgba(255, 255, 255, 0.05);
}

.ac-content {
    background: rgba(0, 0, 0, 0.2);
    padding: 16px;
    border-radius: 8px;
    font-size: 0.9rem;
    line-height: 1.6;
    color: var(--text-primary);
    max-height: 250px;
    overflow-y: auto;
    border: 1px solid rgba(255, 255, 255, 0.05);
}

.ac-content h3 {
    color: var(--accent-cyan);
    margin-top: 16px;
    font-weight: 600;
}

.ac-content h3:first-child {
    margin-top: 0;
}

/* Donut Chart & Legend */
.report-body {
    display: flex;
    align-items: center;
    justify-content: space-evenly;
    padding: 10px 0;
}

.report-footer {
    text-align: center;
    padding-top: 15px;
    border-top: 1px solid rgba(255, 255, 255, 0.05);
    margin-top: 10px;
}

.view-report-link {
    color: var(--accent-blue);
    text-decoration: none;
    font-size: 0.9rem;
    font-weight: 500;
    transition: color 0.2s;
    display: inline-flex;
    align-items: center;
    gap: 8px;
}

.view-report-link:hover {
    color: var(--accent-cyan);
    text-decoration: underline;
}

.chart-wrapper {
    width: 160px;
    height: 160px;
    position: relative;
    /* Glow behind chart */
    filter: drop-shadow(0 0 10px rgba(0, 0, 0, 0.2));
}

.detailed-donut {
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background: conic-gradient(var(--bg-marketing) 0% 100%);
}

/* Center Hole */
.detailed-donut::after {
    content: "";
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 75%;
    height: 75%;
    background: var(--bg-card);
    /* Match card background */
    backdrop-filter: blur(20px);
    /* Enhance glass effect in hole */
    border-radius: 50%;
}

.chart-center-text {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    text-align: center;
    z-index: 2;
}

.center-percent {
    font-size: 1.8rem;
    font-weight: 700;
    color: #fff;
}

.center-label {
    font-size: 0.7rem;
    color: var(--text-secondary);
    letter-spacing: 0.1em;
    text-transform: uppercase;
}

.detailed-legend {
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.legend-row {
    display: flex;
    align-items: center;
    font-size: 0.85rem;
    color: var(--text-secondary);
}

.dot {
    margin-right: 12px;
}

/* Scrollbar Styling */
::-webkit-scrollbar {
    width: 8px;
}

::-webkit-scrollbar-track {
    background: transparent;
}

::-webkit-scrollbar-thumb {
    background: rgba(255, 255, 255, 0.2);
    border-radius: 4px;
}

/* Modal Styles */
.modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.6);
    backdrop-filter: blur(4px);
    z-index: 10000;
    display: flex;
    justify-content: center;
    align-items: center;
}

.modal-content {
    background: #1E293B;
    /* Slate 800 */
    border: 1px solid var(--glass-border);
    border-radius: var(--card-radius);
    width: 90%;
    max-width: 500px;
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
    animation: slideUp 0.3s ease-out;
    padding: 24px;
}

.modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 24px;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    padding-bottom: 12px;
}

.modal-header h3 {
    margin: 0;
    font-size: 1.25rem;
    color: var(--text-primary);
}

.modal-body .input-group {
    margin-bottom: 16px;
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.modal-body label {
    font-size: 0.9rem;
    color: var(--text-secondary);
}

.modal-footer {
    display: flex;
    justify-content: flex-end;
    gap: 12px;
    margin-top: 24px;
    padding-top: 16px;
    border-top: 1px solid rgba(255, 255, 255, 0.1);
}

@keyframes slideUp {
    from {
        transform: translateY(20px);
        opacity: 0;
    }

    to {
        transform: translateY(0);
        opacity: 1;
    }
}

/* Loading Overlay */
.loading-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(11, 14, 20, 0.8);
    backdrop-filter: blur(5px);
    z-index: 9999;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    gap: 20px;
}

.spinner {
    width: 50px;
    height: 50px;
    border: 4px solid rgba(6, 182, 212, 0.3);
    border-top: 4px solid var(--accent-cyan);
    border-radius: 50%;
    animation: spin 1s linear infinite;
    box-shadow: 0 0 15px var(--accent-cyan-glow);
}

.loading-text {
    font-size: 1.2rem;
    color: var(--text-primary);
    letter-spacing: 0.05em;
    font-weight: 500;
    animation: pulse 1.5s infinite ease-in-out;
}

@keyframes spin {
    0% {
        transform: rotate(0deg);
    }

    100% {
        transform: rotate(360deg);
    }
}

@keyframes pulse {

    0%,
    100% {
        opacity: 0.7;
    }

    50% {
        opacity: 1;
    }
}


::-webkit-scrollbar-thumb:hover {
    background: rgba(255, 255, 255, 0.2);
}

/* Mobile Response */
@media (max-width: 1024px) {
    .dashboard-grid {
        grid-template-columns: 1fr;
    }

    .right-panel {
        order: 2;
    }
}

/* Git Link Wrapper (Hidden by default) */
.git-link-container {
    display: none;
    margin-top: 20px;
}

/* Git Link Button - Green Styles */
.git-link-btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 15px;
    background: linear-gradient(135deg, #10B981, #059669);
    /* Accent Green Gradient */
    color: white;
    text-decoration: none;
    padding: 12px 24px;
    border-radius: var(--btn-radius);
    font-weight: 600;
    font-size: 0.95rem;
    box-shadow: 0 0 15px rgba(16, 185, 129, 0.3);
    /* Green Glow */
    transition: all 0.2s ease;
    margin-top: 20px;
    /* Spacing from controls above */
}

.git-link-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 25px rgba(16, 185, 129, 0.5);
    filter: brightness(1.1);
}